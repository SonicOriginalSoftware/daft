# An example pipeline file

- events:
  - post_receive:
      branches: ['production']

- env:
    ENV: 'PRODUCTION'

- stages:
  - build:
      resources: ['shared/image.png']
      jobs:
        - build_for_linux:
            attributes:
              shell: 'posix'
              os: 'linux'
              arch: 'x86_64'
            steps: |
              echo 'Building...'
            artifacts:
              build: 'path-to-build-folder'

        - build_for_windows:
            attributes:
              shell: 'powershell'
              os: 'windows'
              arch: 'x86_64'
            steps: |
              echo 'Hello, world!'

  - test:
      env:
        ENV: 'TEST'
      resources: []
      jobs:
        - test_for_linux:
            attributes:
              shell: 'posix'
              os: 'linux'
              arch: 'x86_64'
            steps: |
              echo 'Testing...'

  - deploy:
      resources: []
      jobs:
        - deploy:
            env:
              ENV: 'TEST'
            attributes:
              shell: 'posix'
              os: 'any'
              arch: 'x86_64'
            steps: |
              echo 'Deploying...'
